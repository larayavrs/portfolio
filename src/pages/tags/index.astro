---
import Breadcrumbs from "@/components/Breadcrumbs.astro";
import Link from "@/components/Link.astro";
import PageHeading from "@/components/PageHeading.astro";
import { badgeVariants } from "@/components/ui/badge";
import Layout from "@/layouts/Layout.astro";
import { getSortedTags } from "@/lib/data";
import { Icon } from "astro-icon/components";

const sortedTags = await getSortedTags();
// filter "novedades" tag to make it with different color
const newsTag = sortedTags.find((tag) => tag.tag === "novedades");
---

<Layout class="max-w-3xl">
  <PageHeading slot="head" title="Tags" />
  <Breadcrumbs items={[{ label: "Tags", icon: "lucide:tag" }]} />

  <div class="flex flex-col gap-4">
    <div class="flex flex-wrap gap-2">
      {
        sortedTags.map(({ tag, count }) => (
          <Link
            href={`/tags/${tag}`}
            class={badgeVariants({
              variant: tag === newsTag?.tag ? "special" : "secondary",
            })}
          >
            <Icon name="lucide:hash" class="size-4" />
            {tag}
            {tag === newsTag?.tag && <Icon name="lucide:star" class="size-4" />}
            <span class="text-muted-foreground ml-1">{count}</span>
          </Link>
        ))
      }
    </div>
  </div>
</Layout>
